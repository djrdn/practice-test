# –ù–∞–∑–≤–∞ –Ω–∞—à–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω—É, —è–∫–∞ –±—É–¥–µ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏—Å—å —É –≤–∫–ª–∞–¥—Ü—ñ Actions
name: Java CI/CD

# –ö–æ–ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –ø–∞–π–ø–ª–∞–π–Ω:
on:
  push:                # –ü—ñ—Å–ª—è –ø—É—à—É –∫–æ–¥—É
    branches: [ main ] # ...–∞–ª–µ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –ø—É—à —É –≥—ñ–ª–∫—É main
  pull_request:        # –¢–∞–∫–æ–∂ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ pull request (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è —Ä–µ–≤'—é)

# --- CI: –ó–±—ñ—Ä–∫–∞ —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è ---
jobs:
  build-and-test:
    name: üß™ CI - Build & Test       # –ù–∞–∑–≤–∞ job-–∞
    runs-on: ubuntu-latest          # –í—ñ—Ä—Ç—É–∞–ª—å–Ω–∞ –º–∞—à–∏–Ω–∞ Linux

    steps:
      # –ö—Ä–æ–∫ 1: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–¥—É –∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
      - name: Checkout code
        uses: actions/upload-artifact@v4

      # –ö—Ä–æ–∫ 2: –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ Java (—Ç—É—Ç –≤–µ—Ä—Å—ñ—è 17, –º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –Ω–∞ —Å–≤–æ—é)
      - name: Set up Java
        uses: actions/setup-java@v3
        with:
          java-version: '17'
          distribution: 'temurin'  # –í–∫–∞–∑—É—î–º–æ JDK-–¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤ (temurin = AdoptOpenJDK)

      # –ö—Ä–æ–∫ 3: –ö–æ–º–ø—ñ–ª—é—î–º–æ, –∑–∞–ø—É—Å–∫–∞—î–º–æ —Ç–µ—Å—Ç–∏, —Å—Ç–≤–æ—Ä—é—î–º–æ .jar
      - name: Build with Maven
        run: mvn clean install

      # –ö—Ä–æ–∫ 4: (–ù–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–∏–π) ‚Äî –ó–∞–ø—É—Å–∫–∞—î–º–æ —Ç—ñ–ª—å–∫–∏ —Ç–µ—Å—Ç–∏ –æ–∫—Ä–µ–º–æ (–º–æ–∂–µ –¥—É–±–ª—é–≤–∞—Ç–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—î)
      - name: Run Unit Tests
        run: mvn test

      # –ö—Ä–æ–∫ 5: –ê—Ä—Ö—ñ–≤—É—î–º–æ —Ç–µ—Å—Ç–æ–≤—ñ –∑–≤—ñ—Ç–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è QA –∞–±–æ –∞–Ω–∞–ª—ñ–∑—É)
      - name: Archive Test Reports
        if: always()  # –í–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –∫—Ä–æ–∫ –∑–∞—Ñ–µ–π–ª–∏–≤—Å—è
        uses: actions/upload-artifact@v3
        with:
          name: test-results
          path: target/surefire-reports  # –¢–∏–ø–æ–≤–∏–π —à–ª—è—Ö –¥–ª—è –∑–≤—ñ—Ç—ñ–≤ Maven Surefire
